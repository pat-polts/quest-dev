/*
 quest-dev 2016-08-28 
*/
function isLoggedIn(){return!!user}function getUserStatus(){return user}function login(a,b){var c=$q.defer();return $http.post("/user/entrar",{username:a,password:b}).success(function(a,b){200===b&&a.status?(user=!0,c.resolve()):(user=!1,c.reject())}).error(function(a){user=!1,c.reject()}),c.promise}function logout(){var a=$q.defer();return $http.get("/user/sair").success(function(b){user=!1,a.resolve()}).error(function(b){user=!1,a.reject()}),a.promise}function register(a,b){var c=$q.defer();return $http.post("/user/registrar",{username:a,password:b}).success(function(a,b){200===b&&a.status?c.resolve():c.reject()}).error(function(a){c.reject()}),c.promise}var quest=angular.module("questApp",["ngRoute","ngMaterial"]);quest.config(function(a,b){a.when("/user/entrar",{templateUrl:"../../views/login.html",controller:"loginController"}).when("/saudacoes",{templateUrl:"../../views/saudacoes.html"}).when("/mais-sobre",{templateUrl:"../../views/mais-sobre.html"}).when("/vamos-jogar",{templateUrl:"../../views/vamos-jogar.html"}).when("/sair",{controller:"logoutController"}).when("/registrar",{templateUrl:"../../views/registrar.html",controller:"registerController"}).otherwise({redirectTo:"/user/entrar"})}),quest.controller("mainController",["$rootScope","$scope","$location","AuthService",function(a,b,c,d){a.login=function(){a.error=!1,a.disabled=!0,d.login(a.loginForm.username,a.loginForm.password,a.loginForm.options).then(function(){c.path("/"),a.disabled=!1,a.loginForm={}}).catch(function(){a.error=!0,a.errorMessage="Erro de login",a.disabled=!1,a.loginForm={}})}}]),quest.controller("loginController",["$rootScope","$scope","$location","AuthService",function(a,b,c,d){a.login=function(){a.error=!1,a.disabled=!0,d.login(b.loginForm.username,b.loginForm.password).then(function(){c.path("/saudacoes"),a.disabled=!1,b.loginForm={},console.log(a.disabled)}).catch(function(){a.error=!0,a.errorMessage="Erro de login",a.disabled=!1,b.loginForm={},console.log(a.disabled)}),console.log(b.loginForm)}}]),quest.factory("AuthService",["$q","$timeout","$http",function(a,b,c){return{isLoggedIn:isLoggedIn,getUserStatus:getUserStatus,login:login,logout:logout,register:register}}]),angular.module("alertError",[]).directive("book",function(){return{restrict:"E",scope:{data:"="},templateUrl:"../../views/templates/alert-error.html"}});